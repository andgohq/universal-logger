import{datadogLogs as t}from"@datadog/browser-logs";import e from"date-fns/locale/ja";import{format as o}from"date-fns";import n from"pino";const s={datadogInitialized:!1,logLevel:(void 0,"debug"),prettyPrint:!1,sharedContext:{},masks:[],maskFunc:t=>"".concat(t.substr(0,8),"***")},a={fatal:"error",error:"error",warn:"warn",info:"info",debug:"debug",trace:"info"};export function initDatadog(e){t.init(e),s.datadogInitialized=!0}export function datadogMessage(e,o,n){s.datadogInitialized&&t.logger.log(e,{context:{...s.sharedContext,...o}},n)}export const setLogLevel=(t,e=!1)=>{Object.assign(s,{logLevel:t,prettyPrint:e})};export const setContext=t=>{s.sharedContext=t};export const setMasks=t=>{s.masks=t};export const setMaskFunc=t=>{s.maskFunc=t};export const logFactory=t=>n({name:t,prettyPrint:!!s.prettyPrint&&{translateTime:"SYS:HH:mm:ss",ignore:"pid,hostname"},level:s.logLevel,formatters:{log:t=>Object.fromEntries(Object.entries(t).map((([t,e])=>[t,s.masks.findIndex((e=>e===t))>=0&&("string"==typeof e||"number"==typeof e)?s.maskFunc("".concat(e)):e])))},browser:{serialize:!0,write:r=>{const{type:i,stack:c,level:l,time:m,msg:d,...g}=r,p=o(new Date(m),"HH:mm:ss",{locale:e}),f=a[n.levels.labels["".concat(l)]],b="".concat(p," [").concat(t,"] ").concat(null!=d?d:""),u=Object.fromEntries(Object.entries(g).map((([t,e])=>[t,s.masks.findIndex((e=>e===t))>=0&&("string"==typeof e||"number"==typeof e)?s.maskFunc("".concat(e)):e])));Object.keys(u).length?console[f](b,u):console[f](b),datadogMessage(null!=d?d:"",{logger:t,...u},f)}}});
//# sourceMappingURL=index.js.map
