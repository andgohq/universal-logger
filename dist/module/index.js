import{datadogLogs as e,StatusType as o,Datacenter as t}from"@datadog/browser-logs";import r from"date-fns/locale/ja";import{format as n}from"date-fns";import s from"pino";var a=!1;export function initDatadog(o){e.init({clientToken:o.clientToken,datacenter:t.US,applicationId:o.applicationId,silentMultipleInit:!0,forwardErrorsToLogs:!0,sampleRate:100}),a=!0}export function datadogMessage(o,t,r){a&&e.logger.log(o,{context:t},r)}var l=s({level:"debug",browser:{serialize:!0,write:function(){},transmit:{send(e,t){var s,a=t.bindings.map((function(e){return e.module})).join("."),l=n(new Date(t.ts),"HH:mm:ss",{locale:r}),i="error"===e&&"Error"===t.messages[0].type,c=i?null!==(s=t.messages[1])&&void 0!==s?s:t.messages[0].msg:t.messages[0],g=t.messages[i?2:1];if("string"!=typeof c)throw console.debug("[logger]",{level:e,logEvent:t,msg:c}),new Error("".concat(c," should be string type"));if("object"!=typeof g)throw console.debug("[logger]",{level:e,logEvent:t,context:g}),new Error("".concat(c," should be object type"));console[e]("".concat(l," [").concat(a,"] ").concat(c),g),datadogMessage(c,g,o[e])}}}});export var setLogLevel=function(e){l.level=e};export var logFactory=function(e){return l.child({module:e})};
//# sourceMappingURL=index.js.map
